// ข้อมูลปัญหาสินเชื่อแบบ 3 ระดับตาม CR
const LOAN_PROBLEMS_DATA = {
  "วงเงินสินเชื่อไม่เพียงพอ": {
    "101-ผู้กู้รายได้ไม่เพียงพอ/ต่ำกว่าข้อกำหนดของธนาคาร": "หาผู้กู้ร่วม ที่ต้องมีรายได้ไม่ต่ำกว่า 10,000 บาท",
    "102-ผู้กู้มีภาระหนี้สูง": "ลดภาระหนี้",
    "103-ผู้กู้มีบ้านหลังที่ 2 ขึ้นไป ทำให้ LTV ต่ำกว่า 100%": "แนะนำลูกค้าชำระเงินมากกว่าเช่าออมรายเดือน เพื่อลดจำนวนเงินที่ต้องกู้",
    "104-ผู้กู้อายุเยอะ ทำให้ระยะเวลากู้เหลือน้อย": "หาผู้กู้ร่วม ที่ต้องมีรายได้ไม่ต่ำกว่า 10,000 บาท"
  },
  "แหล่งที่มาของรายได้": {
    "201-ผู้กู้อายุงานน้อยกว่า 6 เดือน /ไม่ผ่านทดลองงาน": "รอเวลาผ่านทดลองงาน และให้บริษัทออกหนังสือรับรองการผ่านงาน",
    "202-ผู้กู้รับรายได้เป็นเงินสด หรือรับเงินโอนเข้าบัญชีจากบุคคลธรรมดา": "แจ้งบริษัทขอยื่นประกันสังคม ม.33 รอเวลา 1 ปี หรือ ให้บริษัทโอนเงินให้ลูกค้าตรงวันและจำนวนเท่ากันทุกเดือน หรือ ให้ลูกค้ายื่นเสียภาษีเงินได้ ภงด.",
    "203-ผู้กู้เป็นพนักงานในบริษัทขนาดเล็ก": "เดินบัญชีให้มีเงินเข้าบัญชีอย่างสม่ำเสมออย่างน้อย 1ปี",
    "211-เจ้าของกิจการ บริษัทฯ จดทะเบียนไม่ถึง 1 ปี/ บริษัทฯ ขนาดเล็ก": "หาผู้กู้ร่วม ที่ต้องมีรายได้ไม่ต่ำกว่า 10,000 บาท",
    "212-เจ้าของกิจการ บริษัทฯ ส่งงบการเงินขาดทุนต่อเนื่อง 3 ปี/ไม่ส่งงบการเงิน": "หาผู้กู้ร่วม ที่ต้องมีรายได้ไม่ต่ำกว่า 10,000 บาท",
    "221-ผู้กู้ประกอบอาชีพอิสระ - เอกสารแสดงรายได้ไม่ชัดเจน": "เดินบัญชีให้มีเงินเข้าบัญชีอย่างสม่ำเสมออย่างน้อย 1ปี"
  },
  "ประวัติสินเชื่อ และคุณสมบัติอื่นๆ": {
    "301-ผู้กู้มีประวัติชำระล่าช้า หรือค้างชำระ มากกว่า 31 วัน ขึ้นไป": "ชำระหนี้ที่ค้างให้ครบ และรอ 6 เดือน โดยห้ามค้างชำระอีก",
    "302-ผู้กู้ไม่เคยมีประวัติข้อมูลเครดิต": "แนะนำให้เปิดบัตรเครดิต มียอดใช้ไม่ต่ำกว่า 5,000 ในรอบ 1 เดือน",
    "303-นักศึกษา เรียนจบใหม่ อายุต่ำกว่า 23 ปี": "หาผู้กู้ร่วม ที่ต้องมีรายได้ไม่ต่ำกว่า 10,000 บาท"
  }
};

// ปัญหาอื่น ๆ ที่ไม่อยู่ในหมวดหลัก
const OTHER_PROBLEMS = {
  "ยังไม่มีประสงค์ยื่นกู้ขอสินเชื่อเพื่อที่อยู่อาศัยกับธนาคาร": "หาผู้กู้ร่วม ที่ต้องมีรายได้ไม่ต่ำกว่า 10,000 บาท",
  "ผู้เช่าออมเป็นชาวต่างชาติ": "หาผู้กู้ร่วมสัญชาติไทย (คู่สมรส) ที่ต้องมีรายได้ไม่ต่ำกว่า 10,000 บาท",
  "ภาระหนี้สูง": "ชำระหนี้ ทุกประเภท ตามกำหนด(ไม่ค้างชำระเกินกำหนด)",
  "เอกสาร/ข้อมูลประกอบการพิจารณาไม่สมบูรณ์": "จัดเตรียมเอกสารเพิ่มเติมเพื่อเตรียมยื่นกู้ธนาคาร",
  "ภาระหนี้สูง(ต้องลด)": "ลดภาระหนี้บัตรเครดิต/สินเชื่อส่วนบุคคล/สินเชื่อเช่าซื้อรถ/สินเชื่ออื่น",
  "ภาระหนี้ ส่วนบุคคล และ สินเชื่อเพื่อที่อยู่อาศัย": "ปิดหนี้ ส่วนบุคคล และ สินเชื่อเพื่อที่อยู่อาศัย",
  "ต้องการใช้บริการLivnex": "livnex",
  "ผู้เช่าออมร่วมอายุไม่ถึงเกณฑ์": "",
  "ปัญหาการส่งภาษีและงบกำไรขาดทุน": "ส่งภาษีและงบกำไรขาดทุน และรักษาสถานะให้บริษัทมีกำไร",
  "มีความประสงค์ซื้อสด": ""
};

// Helper functions
const getProblemCategories = () => {
  return Object.keys(LOAN_PROBLEMS_DATA);
};

const getProblemDetails = (category) => {
  return Object.keys(LOAN_PROBLEMS_DATA[category] || {});
};

const getSolution = (category, detail) => {
  return LOAN_PROBLEMS_DATA[category]?.[detail] || '';
};

const getAllOtherProblems = () => {
  return Object.keys(OTHER_PROBLEMS);
};

const getOtherProblemSolution = (problem) => {
  return OTHER_PROBLEMS[problem] || '';
};

// Get all problems as flat list (for existing data compatibility)
const getAllProblemsFlat = () => {
  const problems = [];
  
  // Add categorized problems
  Object.keys(LOAN_PROBLEMS_DATA).forEach(category => {
    Object.keys(LOAN_PROBLEMS_DATA[category]).forEach(detail => {
      problems.push({
        category,
        detail,
        solution: LOAN_PROBLEMS_DATA[category][detail],
        type: 'categorized'
      });
    });
  });
  
  // Add other problems
  Object.keys(OTHER_PROBLEMS).forEach(problem => {
    problems.push({
      category: 'อื่น ๆ',
      detail: problem,
      solution: OTHER_PROBLEMS[problem],
      type: 'other'
    });
  });
  
  return problems;
};

module.exports = {
  LOAN_PROBLEMS_DATA,
  OTHER_PROBLEMS,
  getProblemCategories,
  getProblemDetails,
  getSolution,
  getAllOtherProblems,
  getOtherProblemSolution,
  getAllProblemsFlat
};